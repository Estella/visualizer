<div id="sidebar-wrapper" class="collapse sidebar-collapse">
  <div id="search">
    <form>
      <input class="form-control input-sm" type="text" name="search" placeholder="Search..." />
      <button type="submit" id="search-btn" class="btn"><i class="fa fa-search"></i></button>
    </form>
  </div>

  <nav id="sidebar">
    <ul id="main-nav" class="open-active">
      <li>
        <a href="<%= @mount %>">
          <i class="fa fa-dashboard"></i>
          Dashboard
        </a>
      </li>

      <li>
        <a href="<%= @mount%>blacklist">
          <i class="fa fa-ban"></i>
          Blacklist
        </a>
      </li>

      <li>
        <a href="<%= @mount%>suspects">
          <i class="fa fa-gavel"></i>
          Suspects
        </a>
      </li>

      <li>
        <a href="<%= @mount%>whitelist">
          <i class="fa fa-thumbs-o-up"></i>
          Whitelist
        </a>
      </li>

      <!-- <li>
      <a href="javascript:;">
      <i class="fa fa-bar-chart-o"></i>
      ModSecurity Analysis
      </a>
      </li> -->

      <li class="active">
        <a href="<%= @mount %>worldview">
          <i class="fa fa-globe"></i>
          World View
        </a>
      </li>
    </ul>
  </nav>
</div>

<div id="content">
  <div id="content-header">
    <h1>World View</h1>
  </div>

  <div id="content-container">
    <div id="map" style="width: 1024px; height: 768px; margin: auto;"></div>

    <script type="text/javascript">
     var locations = [
       <% @data.each do |address, geodetails| %>
       ['<%= address %>', <%= geodetails[0] %>, <%= geodetails[1] %>],
       <% end %>
     ];

     var map = new google.maps.Map(document.getElementById('map'), {
       zoom: 2,
       center: new google.maps.LatLng(41.833, -87.731),
       mapTypeId: google.maps.MapTypeId.ROADMAP
     });

     var infowindow = new google.maps.InfoWindow();
     var marker, i;

     for (i = 0; i < locations.length; i++) {
       marker = new google.maps.Marker({
         position: new google.maps.LatLng(locations[i][1], locations[i][2]),
         map: map
       });

       google.maps.event.addListener(marker, 'click', (function(marker, i) {
         return function() {
           infowindow.setContent(locations[i][0]);
           infowindow.open(map, marker);
         }
       })(marker, i));
     }
    </script>
  </div>
</div>

#!/usr/bin/env ruby

begin
  require 'repsheet_visualizer/application/app.rb'
  if ARGV.count == 3
    RepsheetVisualizer::App.set :redis_host, ARGV[0]
    RepsheetVisualizer::App.set :redis_port, ARGV[1]
    RepsheetVisualizer::App.set :geoip_database, ARGV[2]
  end
  RepsheetVisualizer::App.run!
rescue LoadError => e
  require 'rubygems'
  path = File.expand_path '../../lib', __FILE__
  $:.unshift(path) if File.directory?(path) && !$:.include?(path)
  require 'repsheet_visualizer/application/app.rb'

  if ARGV.count == 3
    RepsheetVisualizer::App.set :redis_host, ARGV[0]
    RepsheetVisualizer::App.set :redis_port, ARGV[1]
    RepsheetVisualizer::App.set :geoip_database, ARGV[2]
  end
  
  RepsheetVisualizer::App.run!
end
